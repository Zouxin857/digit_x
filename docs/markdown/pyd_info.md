> Created on Sun Oct 10 20\36\01 2021 @author: Richie Bao-python_code_archi_la_design_method_study 西安建筑科技大学-规划/建筑/景观本科数字化系列课程

# PYTHON 编程景观|建筑 设计方法  python coding Archi|LA design method study

### 高校课程信息
**课程名称**：Python数字设计编程基础 （以后课程名称可能修改为：PYTHON数字化设计方法）

**学分**：1.5

**总学时/课内实践学时**：24

**课程性质**：选修课程

**课程类型**：通识核心课程

**适应对象**：建筑、风景、规划


### 组队
每6人一组，如不能归整，余数分别自由组到已有组别。每组自行推选一个组长，组名自选任何一种动物名。不同专业尽量混合。

推选课程代表2-3人，负责课程事宜。

### 记笔记
使用markdown（[在Visual Studio Code下编辑](https://code.visualstudio.com/)）/JupyterLab([使用Anaconda下的JupyterLab](https://www.anaconda.com/))记笔记。

### 考核

* 平时成绩

1. 小组实验，组内成员贡献度由小组根据个人贡献大小共同确定（需诚实守信）， 百分比计算，综合为100%。
2. 个人笔记记录情况（存储于个人GitHub）。
3. 签到，由课代表及组长负责（需诚实守信）。

* 期末成绩

### 代码和笔记托管

个人申请[GitHub](https://github.com/)账号，代码和笔记推送至此，用于教师在线查看评定。

小组实验的代码和笔记置于组长的GitHub账户下，单独建立代码仓库repository，各组统一命名为:PYD_Experiment，每次实验均推送至该仓库下，并位于单独的文件夹下（每次实验的单独文件夹名，由教师给定）。

### 关于英语
编写程序时，可以打开翻译软件，通过函数名，变量名以及注释，使得程序代码易读。同时提升英语能力（包括读音锻炼）。

### 小组名单
由课代表完成汇总，格式为（Excel编写）：

* 表1

| 序号  |  组名 | 组员名 |学号 | 组长  |  个人GitHub仓库链接地址 |签到-1 |签到-2 |... |签到-12 | 签到成绩 |小组实验个人贡献-1|...|小组实验个人贡献-n|小组实验个人贡献成绩|期末实验个人贡献度|总成绩|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| 1  | Kitty  | 张三  |   | 是  |   |  1 |   |   |   |   |   |   |   |   |   |   |
| 2  |   | 李四  |   |   |   |  1 |   |   |   |   |   |   |   |   |   |   |
| 3  |   | 王五  |   |   |   |  0 |   |   |   |   |   |   |   |   |   |   |
| 4  |   | .  |   |   |   |   |   |   |   |   |   |   |   |   |   |   |
| 5  |   | .  |   |  |   |   |   |   |   |   |   |   |   |   |   |   |
| 6  |   | .  |   |   |   |   |   |   |   |   |   |   |   |   |   |   |
| 7  | Squirrel  | 赵六 |   | 是  |   | 1  |   |   |   |   |   |   |   |   |   |   |
| 8  |   | 孙七  |   |   |   |  2 |   |   |   |   |   |   |   |   |   |   |
| ...  |   | .  |   |   |   |   |   |   |   |   |   |   |   |   |   |   |
| n  |   |  . |   |   |   |   |   |   |   |   |   |   |   |   |   |   |

* 表2

| 序号  | 组名   | 小组实验-1  | ...  |  小组实验-n |期末实验|
|---|---|---|---|---|---|
|  1 | Kitty  |   |   |   |   |
|  2 | Squirrel  |   |   |   |   |
| ...  |  . |   |   |   |   |
| n  |  . |   |   |   |   |


> 签到，1为到，0为未到，2为请假（需假条）。最后汇总，由课代表在python中读取Excel文件编写代码，计算最终签到成绩，小组实验成绩。

### 小组实验

在Github中的个人账户中，定义Repository（仓库），Repository统一命名为`python_AR_LA_PL_course`，并将Repositories设置为"public"，以便教师浏览给出成绩。之后的实验均使用[GitHub Desktop](https://desktop.github.com/)，push（推送）至该repository中。

#### 实验-1
个人实验：在Ananconda下的JupyterLab中，完成[**设计师与PYTHON | PYTHON基础速学**](https://digit-x.github.io/digit_x/#/./markdown/py_designer_and_python_tutorial_basic)章节**PYTHON基础速学**部分代码，命名为`ex_01_python_quick_tutorial.ipynb`，并上传至GitHub中的个人Repository(`python_AR_LA_PL_course`)中。

#### 实验-2
小组实验：从各自专业领域选择解决一个问题的任一知识点，应用python语言定义一个泛化通用的函数，能够解决满足此类逻辑不同输入条件参数的问题。例如：

建筑专业：例如解决一注真题_建筑结构[2001-6]的此类问题：

<a href=""><img src="./imgs_pyd/058.jpg" height='auto' width='auto' title="caDesign"></a> 

规划专业：例如计算技术经济指标：容积率，人口毛密度，住宅建筑面积净密度，住宅建筑净密度，住宅平均层数，绿地率，容积率，建筑密度等。下述问题引自网络：

<a href=""><img src="./imgs_pyd/059.jpg" height='auto' width='auto' title="caDesign"></a> 

景观专业：例如求定额工程量。下述问题引自网络：

<a href=""><img src="./imgs_pyd/060.jpg" height='auto' width='auto' title="caDesign"></a> 

> 每组自行选题，各组之间选题不能相同，如果相同则均以最低分计算。

代码文件统一命名为`ex_02_function.ipynb`，并由组长上传至组长的GitHub账户，单独建立代码仓库repository，各组统一命名为:｀PYD_Experiment｀。

文件中，需说明函数的意图，输入参数，和返回值等信息。并应用该函数实际运算演示。

#### 实验-3


#### 实验-4


#### 实验-5


#### 实验-6


### 期末实验

### 分组代码

> 因为多个班级，班级间同学可能并不十分熟识，随机分组会增加磨合时间和配合度，因此改为自行结组。

```python
import pandas as pd
requirements_fp=r'./data/python_lesson_roll_book_2021.xlsx'
pylesson_roll=pd.read_excel(requirements_fp,sheet_name='roll',header=[0],engine='openpyxl')
pylesson_roll=pylesson_roll[pylesson_roll.filter(regex='^(?!Unnamed)').columns]
pylesson_roll
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>N</th>
      <th>ID</th>
      <th>name</th>
      <th>major</th>
      <th>class</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>2001050101</td>
      <td>程佳怡</td>
      <td>建筑</td>
      <td>建筑2001</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>2001050102</td>
      <td>王雨晨</td>
      <td>建筑</td>
      <td>建筑2001</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>2001050104</td>
      <td>武长乐</td>
      <td>建筑</td>
      <td>建筑2001</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>2001050105</td>
      <td>杨昱萱</td>
      <td>建筑</td>
      <td>建筑2001</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>2001050106</td>
      <td>李玉洁</td>
      <td>建筑</td>
      <td>建筑2001</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>91</th>
      <td>92</td>
      <td>1904020502</td>
      <td>马萍坪</td>
      <td>建筑</td>
      <td>风景2001</td>
    </tr>
    <tr>
      <th>92</th>
      <td>93</td>
      <td>2001030101</td>
      <td>马好好</td>
      <td>建筑</td>
      <td>风景2001</td>
    </tr>
    <tr>
      <th>93</th>
      <td>94</td>
      <td>2001030115</td>
      <td>凌雨翔</td>
      <td>建筑</td>
      <td>风景2001</td>
    </tr>
    <tr>
      <th>94</th>
      <td>95</td>
      <td>2001030123</td>
      <td>张卜予</td>
      <td>建筑</td>
      <td>风景2001</td>
    </tr>
    <tr>
      <th>95</th>
      <td>96</td>
      <td>2001030220</td>
      <td>王光辉</td>
      <td>建筑</td>
      <td>风景2002</td>
    </tr>
  </tbody>
</table>
<p>96 rows × 5 columns</p>
</div>




```python
from sklearn.utils import shuffle
pylesson_roll=shuffle(pylesson_roll,random_state=10) 
pylesson_roll
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>N</th>
      <th>ID</th>
      <th>name</th>
      <th>major</th>
      <th>class</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>34</th>
      <td>35</td>
      <td>2001010220</td>
      <td>潘洪转</td>
      <td>建筑</td>
      <td>建筑2002</td>
    </tr>
    <tr>
      <th>58</th>
      <td>59</td>
      <td>2001010331</td>
      <td>任长帅</td>
      <td>建筑</td>
      <td>建筑2003</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>2001050105</td>
      <td>杨昱萱</td>
      <td>建筑</td>
      <td>建筑2001</td>
    </tr>
    <tr>
      <th>35</th>
      <td>36</td>
      <td>2001010223</td>
      <td>李飞翔</td>
      <td>建筑</td>
      <td>建筑2002</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>2001050128</td>
      <td>刘恒</td>
      <td>建筑</td>
      <td>建筑2001</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>89</th>
      <td>90</td>
      <td>2008050205</td>
      <td>刘茜</td>
      <td>建筑</td>
      <td>城规2102</td>
    </tr>
    <tr>
      <th>28</th>
      <td>29</td>
      <td>2001010211</td>
      <td>尹若寒</td>
      <td>建筑</td>
      <td>建筑2002</td>
    </tr>
    <tr>
      <th>64</th>
      <td>65</td>
      <td>2001010412</td>
      <td>吴博雅</td>
      <td>建筑</td>
      <td>建筑2004</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>2001050122</td>
      <td>李凯</td>
      <td>建筑</td>
      <td>建筑2001</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>2001050116</td>
      <td>薛嘉玮</td>
      <td>建筑</td>
      <td>建筑2001</td>
    </tr>
  </tbody>
</table>
<p>96 rows × 5 columns</p>
</div>




```python
import math,itertools

rows=len(pylesson_roll)
member_num=6
group_num=math.floor(rows/member_num)
remainder=rows%member_num
print("group_num={},remainder={}".format(group_num,remainder))
group_label=[list(itertools.repeat(i+1,member_num)) for i in range(group_num)]
print(group_label)
print("_"*50)
if remainder !=0:
    group_label=[group_label[i]+[i+1] if i <remainder else group_label[i] for i in range(group_num) ]
print(group_label)    
print("_"*50)
flatten_lst=lambda lst: [m for n_lst in lst for m in flatten_lst(n_lst)] if type(lst) is list else [lst]
group_label_flatten=flatten_lst(group_label)
print(group_label_flatten)
print("_"*50)
pd.options.mode.chained_assignment = None  # default='warn'
pylesson_roll['group_label']=group_label_flatten
print(pylesson_roll)
pylesson_roll.to_excel('./data/python_lesson_roll_book_2021_group.xlsx')
```

    group_num=16,remainder=0
    [[1, 1, 1, 1, 1, 1], [2, 2, 2, 2, 2, 2], [3, 3, 3, 3, 3, 3], [4, 4, 4, 4, 4, 4], [5, 5, 5, 5, 5, 5], [6, 6, 6, 6, 6, 6], [7, 7, 7, 7, 7, 7], [8, 8, 8, 8, 8, 8], [9, 9, 9, 9, 9, 9], [10, 10, 10, 10, 10, 10], [11, 11, 11, 11, 11, 11], [12, 12, 12, 12, 12, 12], [13, 13, 13, 13, 13, 13], [14, 14, 14, 14, 14, 14], [15, 15, 15, 15, 15, 15], [16, 16, 16, 16, 16, 16]]
    __________________________________________________
    [[1, 1, 1, 1, 1, 1], [2, 2, 2, 2, 2, 2], [3, 3, 3, 3, 3, 3], [4, 4, 4, 4, 4, 4], [5, 5, 5, 5, 5, 5], [6, 6, 6, 6, 6, 6], [7, 7, 7, 7, 7, 7], [8, 8, 8, 8, 8, 8], [9, 9, 9, 9, 9, 9], [10, 10, 10, 10, 10, 10], [11, 11, 11, 11, 11, 11], [12, 12, 12, 12, 12, 12], [13, 13, 13, 13, 13, 13], [14, 14, 14, 14, 14, 14], [15, 15, 15, 15, 15, 15], [16, 16, 16, 16, 16, 16]]
    __________________________________________________
    [1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16]
    __________________________________________________
         N          ID name major   class  group_label
    34  35  2001010220  潘洪转    建筑  建筑2002            1
    58  59  2001010331  任长帅    建筑  建筑2003            1
    3    4  2001050105  杨昱萱    建筑  建筑2001            1
    35  36  2001010223  李飞翔    建筑  建筑2002            1
    19  20  2001050128   刘恒    建筑  建筑2001            1
    ..  ..         ...  ...   ...     ...          ...
    89  90  2008050205   刘茜    建筑  城规2102           16
    28  29  2001010211  尹若寒    建筑  建筑2002           16
    64  65  2001010412  吴博雅    建筑  建筑2004           16
    15  16  2001050122   李凯    建筑  建筑2001           16
    9   10  2001050116  薛嘉玮    建筑  建筑2001           16
    
    [96 rows x 6 columns]
    


```python
def roll_group(member_num,random_state=None,save_path=None,**kwargs):
    import pandas as pd
    pd.options.mode.chained_assignment = None  # default='warn'
    import math,itertools
    from sklearn.utils import shuffle    
    
    '''
    function - 指定每组人数，随机分组，未尽分组人分配到其他组
    
    paras:
    member_num - 每组成员数
    random_state - 随机状态。默认每次均变化，给定固定值，则每次一样
    save_path - 设置保存路径，如果不设置则不保存
    kwargs - keyword arguments。包括：file_path - excel文件路径； sheet_name - 表名称； header - column 名称为第几行

    return:
    roll - DataFrame格式，返回随机分配好的成员名单
    '''

    roll=pd.read_excel(kwargs["file_path"],kwargs["sheet_name"],header=kwargs["header"],engine='openpyxl')    
    roll=shuffle(roll,random_state=random_state) 
    #print(roll)
    
    member_num=member_num
    rows=len(pylesson_roll)
    group_num=math.floor(rows/member_num)
    remainder=rows%member_num
    group_label=[list(itertools.repeat(i+1,member_num)) for i in range(group_num)]
    if remainder !=0:
        group_label=[group_label[i]+[i+1] if i <remainder else group_label[i] for i in range(group_num) ]    
    flatten_lst=lambda lst: [m for n_lst in lst for m in flatten_lst(n_lst)] if type(lst) is list else [lst]
    group_label_flatten=flatten_lst(group_label)   
    roll['group_label']=group_label_flatten
    #print(roll)
    
    if save_path:
        roll.to_excel(save_path)
        print("The group excel has been saved to the path:{}".format(save_path))
    
    return roll    
    
exel_read_info={"file_path":r'./data/python_lesson_roll_book_2021.xlsx',"sheet_name":'roll',"header":[0]}
roll_group=roll_group(member_num=6,random_state=10,save_path='./data/python_lesson_roll_book_2021_group.xlsx',**exel_read_info)    
```

    The group excel has been saved to the path:./data/python_lesson_roll_book_2021_group.xlsx
    


```python
roll_group
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>N</th>
      <th>ID</th>
      <th>name</th>
      <th>major</th>
      <th>class</th>
      <th>group_label</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>34</th>
      <td>35</td>
      <td>2001010220</td>
      <td>潘洪转</td>
      <td>建筑</td>
      <td>建筑2002</td>
      <td>1</td>
    </tr>
    <tr>
      <th>58</th>
      <td>59</td>
      <td>2001010331</td>
      <td>任长帅</td>
      <td>建筑</td>
      <td>建筑2003</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>2001050105</td>
      <td>杨昱萱</td>
      <td>建筑</td>
      <td>建筑2001</td>
      <td>1</td>
    </tr>
    <tr>
      <th>35</th>
      <td>36</td>
      <td>2001010223</td>
      <td>李飞翔</td>
      <td>建筑</td>
      <td>建筑2002</td>
      <td>1</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>2001050128</td>
      <td>刘恒</td>
      <td>建筑</td>
      <td>建筑2001</td>
      <td>1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>89</th>
      <td>90</td>
      <td>2008050205</td>
      <td>刘茜</td>
      <td>建筑</td>
      <td>城规2102</td>
      <td>16</td>
    </tr>
    <tr>
      <th>28</th>
      <td>29</td>
      <td>2001010211</td>
      <td>尹若寒</td>
      <td>建筑</td>
      <td>建筑2002</td>
      <td>16</td>
    </tr>
    <tr>
      <th>64</th>
      <td>65</td>
      <td>2001010412</td>
      <td>吴博雅</td>
      <td>建筑</td>
      <td>建筑2004</td>
      <td>16</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>2001050122</td>
      <td>李凯</td>
      <td>建筑</td>
      <td>建筑2001</td>
      <td>16</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>2001050116</td>
      <td>薛嘉玮</td>
      <td>建筑</td>
      <td>建筑2001</td>
      <td>16</td>
    </tr>
  </tbody>
</table>
<p>96 rows × 6 columns</p>
</div>

### [指南](https://richiebao.github.io/Urban-Spatial-Data-Analysis_python/#/./markdown/instruction)

